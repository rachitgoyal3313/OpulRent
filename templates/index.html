{% extends 'base.html' %}
{% load static %}

{% block title %}OpulRent - Blockchain Real Estate{% endblock %}

{% block extra_css %}
<style>
.main-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 4rem 2rem;
    max-width: 1200px;
    margin: 0 auto;
}

.hero-content {
    max-width: 600px;
}

.hero-title {
    font-size: 3.5rem;
    font-weight: 800;
    margin-bottom: 1rem;
    line-height: 1.1;
}

.hero-title span {
    color: var(--primary-light);
}

.hero-description {
    color: var(--text-secondary);
    font-size: 1.1rem;
    line-height: 1.6;
    margin-bottom: 2rem;
}

.hero-buttons {
    display: flex;
    gap: 1rem;
    margin-bottom: 2rem;
}

.primary-button {
    background-color: var(--primary-light);
    color: var(--text-light);
    border: none;
    padding: 0.75rem 2rem;
    border-radius: 0.5rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: background-color 0.3s ease;
}

.primary-button:hover {
    background-color: var(--primary-color);
}

.secondary-button {
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--text-light);
    border: none;
    padding: 0.75rem 2rem;
    border-radius: 0.5rem;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.secondary-button:hover {
    background-color: rgba(255, 255, 255, 0.15);
}

.features {
    display: flex;
    gap: 2rem;
    margin-top: 2rem;
}

.feature {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-secondary);
}

.feature svg {
    width: 24px;
    height: 24px;
}

.property-card {
    background-color: var(--card-bg);
    border-radius: 1rem;
    padding: 2rem;
    width: 100%;
    max-width: 400px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
}

.property-image {
    width: 100%;
    height: 200px;
    object-fit: cover;
    border-radius: 0.5rem;
    margin-bottom: 1rem;
}

.property-indicator {
    width: 32px;
    height: 32px;
    background-color: var(--primary-light);
    border-radius: 50%;
    margin-bottom: 1rem;
}

.property-title {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 1.5rem;
}

.property-details {
    margin-bottom: 1.5rem;
}

.property-detail {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.75rem;
}

.property-detail-label {
    color: var(--text-secondary);
}

.property-detail-value {
    font-weight: 600;
}

.roi-value {
    color: var(--success-color);
}

.view-property {
    background-color: var(--primary-light);
    color: var(--text-light);
    border: none;
    padding: 0.75rem;
    border-radius: 0.5rem;
    font-weight: 600;
    cursor: pointer;
    width: 100%;
    transition: background-color 0.3s ease;
}

.view-property:hover {
    background-color: var(--primary-color);
}

/* How It Works Section */
.how-it-works {
    background-color: var(--section-bg);
    padding: 4rem 2rem;
    text-align: center;
    border-radius: 1rem;
    margin: 2rem auto;
    max-width: 1200px;
}

.section-title {
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 1rem;
}

.section-description {
    color: var(--text-secondary);
    font-size: 1.2rem;
    max-width: 800px;
    margin: 0 auto 3rem;
}

.steps-container {
    display: flex;
    justify-content: space-around;
    gap: 2rem;
    margin-top: 2rem;
}

.step {
    display: flex;
    flex-direction: column;
    align-items: center;
    max-width: 300px;
}

.step-icon {
    width: 80px;
    height: 80px;
    background-color: rgba(157, 78, 221, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 1.5rem;
}

.step-icon svg {
    width: 40px;
    height: 40px;
    color: var(--primary-light);
}

.step-title {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 1rem;
}

.step-description {
    color: var(--text-secondary);
    text-align: center;
    line-height: 1.6;
}

@media (max-width: 1024px) {
    .main-content {
        flex-direction: column;
        gap: 3rem;
        text-align: center;
    }
    
    .hero-buttons, .features {
        justify-content: center;
    }
    
    .steps-container {
        flex-direction: column;
        align-items: center;
    }
}
</style>
{% endblock %}

{% block content %}
<section class="main-content">
    <div class="hero-content">
        <h1 class="hero-title">
            <span>OpulRent</span>
            <br>Blockchain Real Estate
        </h1>
        <p class="hero-description">
            Revolutionizing real estate with blockchain multiplicity and AI-powered investment analysis. Buy, rent, and invest in properties as NFTs.
        </p>
        <div class="hero-buttons">
            
            <a href="{% url 'marketplace' %}"><button class="secondary-button">Explore Marketplace</button></a>
        </div>
        <div class="features">
            <div class="feature">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                    <rect x="7" y="7" width="3" height="9"></rect>
                    <rect x="14" y="7" width="3" height="5"></rect>
                </svg>
                Tokenized Properties
            </div>
            <div class="feature">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                    <path d="M7 11V7a5  толстые 0 0 1 10 0v4"></path>
                </svg>
                Secure Transactions
            </div>
            <div class="feature">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m2 12 5.25 5 2.625-5H8c0-3.75 3-7.5 7.5-7.5 2.25 0 4.5 1.5 5.25 3.75"></path>
                    <path d="M22 12c-5.25 0-10.5-3.75-10.5-7.5"></path>
                    <path d="M2 12c5.25 0 10.5 3.75 10.5 7.5"></path>
                </svg>
                AI Analysis
            </div>
        </div>
    </div>
    {% if property %}
    <div class="property-card">
        {% if property.image1 %}
        <img src="{{ property.image1.url }}" alt="{{ property.house_type }} in {{ property.locality }}" class="property-image">
        {% else %}
        <img src="{% static 'images/placeholder_property.jpg' %}" alt="No image available" class="property-image">
        {% endif %}
        <h3 class="property-title">{{ property.house_type }} in {{ property.locality }}</h3>
        <div class="property-details">
            <div class="property-detail">
                <span class="property-detail-label">Price:</span>
                <span class="property-detail-value">
                    {% if property_type == 'sale' %}
                        {{ property.unit_price }} ETH/unit
                    {% else %}
                        {{ property.rent }} ETH/month
                    {% endif %}
                </span>
            </div>
            <div class="property-detail">
                <span class="property-detail-label">Location:</span>
                <span class="property-detail-value">{{ property.city }}</span>
            </div>
            <div class="property-detail">
                <span class="property-detail-label">Beds:</span>
                <span class="property-detail-value">{{ property.beds }}</span>
            </div>
        </div>
        <a href="{% url 'property_detail' property.id property_type %}" class="view-property" style="text-decoration: none;">View Property</a>
    </div>
    {% else %}
    <div class="property-card">
        <img src="{% static 'images/placeholder_property.jpg' %}" alt="No image available" class="property-image">
        <div class="property-indicator"></div>
        <h3 class="property-title">No Properties Available</h3>
        <div class="property-details">
            <p>No properties are currently available. Check back soon!</p>
        </div>
    </div>
    {% endif %}
</section>

<section class="how-it-works">
    <h2 class="section-title">How It Works</h2>
    <p class="section-description">OpulRent simplifies real estate investments with blockchain technology</p>
    
    <div class="steps-container">
        <div class="step">
            <div class="step-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20 12V8H6a2 2 0 0 1-2-2c0-1.1.9-2 2-2h12v4"></path>
                    <path d="M4 6v12c0 1.1.9 2 2 2h14v-4"></path>
                    <path d="M18 12a2 2 0 0 0-2 2c0 1.1.9 2 2 2h4v-4h-4z"></path>
                </svg>
            </div>
            <h3 class="step-title">Connect Wallet</h3>
            <p class="step-description">
                Connect your crypto wallet to access the OpulRent platform and verify your identity through our KYC process.
            </p>
        </div>
        
        <div class="step">
            <div class="step-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                    <line x1="8" y1="21" x2="16" y2="21"></line>
                    <line x1="12" y1="17" x2="12" y2="21"></line>
                </svg>
            </div>
            <h3 class="step-title">Buy or Rent Properties</h3>
            <p class="step-description">
                Browse tokenized real estate properties on our marketplace. Purchase property NFTs or rent them directly on the blockchain.
            </p>
        </div>
        
        <div class="step">
            <div class="step-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M2 16.1A5 5 0 0 1 5.9 20M2 12.05A9 9 0 0 1 9.95 20M2 8V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6"></path>
                    <line x1="2" y1="20" x2="2" y2="20"></line>
                </svg>
            </div>
            <h3 class="step-title">Analyze Investments</h3>
            <p class="step-description">
                Use our AI-powered investment analysis tool to evaluate properties and make informed investment decisions.
            </p>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
{{ block.super }}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Ensure the Connect Wallet button uses the base.html connectWallet function
        const connectWalletButton = document.querySelector('.primary-button');
        if (connectWalletButton && connectWalletButton.textContent.includes('Connect Wallet')) {
            connectWalletButton.addEventListener('click', async function() {
                await connectWallet();
                updateWalletButtonState();
            });
        }
    });
</script>
{% endblock %}